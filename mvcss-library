#!/usr/bin/env bash
# *************************************
#
#   MVCSS Library
#   -> Download MVCSS Library files or copy to clipboard
#
# -------------------------------------
#   Dependencies
# -------------------------------------
#
#  - bash-comment
#  - download-zip
#
# -------------------------------------
#   Usage
# -------------------------------------
#
#  `mvcss-library` - downloads all of the files
#  `mvcss-library components list` - downloads the List Component
#  `mvcss-library copy components list` - copies the List Component to clipboard
#
# *************************************

# -------------------------------------
#   Errors
# -------------------------------------

set -o errexit
set -o nounset
set -o pipefail

# -------------------------------------
#   Variables
# -------------------------------------

EXT='sass'
URL='https://raw.githubusercontent.com/mvcss/library/master'

# -------------------------------------
#   Error Handling
# -------------------------------------

function _on-exit() {
  [ "$?" != 0 ] && echo 'File not found!'
}

trap _on-exit EXIT

# -------------------------------------
#   Main
# -------------------------------------

if (( "$#" == 0 )); then

  message yellow 'Downloading...'
  download-zip 'https://github.com/mvcss/library/archive/master.zip'
  message green 'Downloaded MVCSS Library to mvcss-library-master/'
  exit

fi

[[ "$*" =~ 'reset' ]] && EXT='scss'

if [ "$1" != 'copy' ]; then

  message yellow 'Downloading...'
  curl -fsO "$URL/$1/_$2.$EXT"
  message green "Downloaded $1/$2!"

else

  message yellow 'Copying...'
  curl -fs "$URL/$2/_$3.$EXT" | pbcopy
  message green "Copied $2/$3 to the clipboard!"

fi
